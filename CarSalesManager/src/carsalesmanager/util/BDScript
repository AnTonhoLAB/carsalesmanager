create database carSalesManager;
use carSalesManager;

create table state(
	id_state int not null auto_increment,
    name varchar(2),
    
    primary key (id_state)
);

create table city(
	id_city int not null auto_increment,
    name varchar(50),
    
    id_state int,
    
    primary key (id_city),
    
    constraint fk_state foreign key(id_state)
    references state(id_state)on delete no action on update cascade
);

create table address(
	id_address int not null auto_increment,
    rua varchar(50),
    numero int,
    complemento varchar(15),
    
    id_city int,
    
    primary key (id_address),
    
    constraint fk_city foreign key (id_city)
    references city(id_city) on delete no action on update cascade
);

create table owner(
	id_owner int not null auto_increment,
    cpf varchar(14),
    name varchar(50),
    
    id_address int,
    
    primary key(id_owner),
    
    constraint fk_add foreign key(id_address)
    references address(id_address) on delete cascade on update cascade
);

create table contact(
	id_contact int not null auto_increment,
    telephone varchar(14),
    cell varchar(15),
    email varchar (50),
    
    id_owner int,
    
    primary key(id_contact),
    
    constraint fk_owner foreign key(id_owner)
    references owner(id_owner) on delete cascade on update cascade
);

create table sale(
	id_sale int not null auto_increment,
    sale_date date,
    portion_number int,
    amount double,
    
    id_owner int,
    
    primary key(id_sale),
    
    constraint fk_owner_sale foreign key(id_owner)
    references owner (id_owner) on delete no action on update cascade
);

create table payment(
	id_payment int not null auto_increment,
    payment_number int,
    payment_amount double,
    
    id_sale int,
    
	primary key(id_payment),
    
    constraint fk_sale_payment foreign key(id_sale)
    references sale (id_sale) on delete cascade on update cascade
);

create table color(
	id_color int not null auto_increment,
    name varchar(15),
    
    primary key (id_color)
);

create table manufacturer(
	id_manufacturer int not null auto_increment,
    name varchar(20),
	
    primary key (id_manufacturer)
);

create table model(
	id_model int not null auto_increment,
    name varchar(30),
    id_manufacturer int,
    primary key (id_model),
    
    constraint fk_manufacturer foreign key (id_manufacturer)
    references manufacturer(id_manufacturer) on delete cascade on update cascade
);

create table model_color(
	id_model int not null,
    id_color int not null,
    
    primary key (id_model, id_color),
    
    constraint fk_model foreign key (id_model)
    references model(id_model) on delete cascade on update cascade,
	
    constraint fk_color foreign key (id_color)
    references color(id_color) on delete cascade on update cascade
);

create table car_type(
	id_car_type int not null auto_increment,
    name varchar(15),
    
    primary key (id_car_type)
);

create table car(
	id_car int not null auto_increment,
    placa varchar(8),
    ano int,
    descricao varchar(500),
    estado boolean,
    km int,
    preco double,
    vendido boolean,
    
    id_car_type int,
    id_model int,
    id_sale int,
    
    primary key (id_car),

	constraint fk_car_type foreign key(id_car_type)
    references car_type(id_car_type) on delete no action on update cascade,
    
	constraint fk_model_car foreign key (id_model)
    references model(id_model)on delete no action on update cascade,
    
    constraint fk_sale foreign key (id_sale)
    references sale(id_sale) on delete no action on update cascade
);

insert into color(name) values("Amarelo");
insert into color(name) values("Azul");
insert into color(name) values("Branco");
insert into color(name) values("Cinza");
insert into color(name) values("Creme");
insert into color(name) values("Laranja");
insert into color(name) values("Marrom");
insert into color(name) values("Perola");
insert into color(name) values("Preto");
insert into color(name) values("Rosa");
insert into color(name) values("Verde");
insert into color(name) values("Vermerlho");

insert into manufacturer(name) values ("Chevrolet");
insert into manufacturer(name) values ("Fiat");
insert into manufacturer(name) values ("Ford");
insert into manufacturer(name) values ("Hyundai");
insert into manufacturer(name) values ("Honda");
insert into manufacturer(name) values ("Nissan");
insert into manufacturer(name) values ("Toyota");
insert into manufacturer(name) values ("Volkswagen");


insert into model(name, id_manufacturer) values("Corsinha",1);
insert into model(name, id_manufacturer) values("Chevette",1);
insert into model(name, id_manufacturer) values("Cobalt",1);
insert into model(name, id_manufacturer) values("Vectra",1);
insert into model(name, id_manufacturer) values("Dobl√¥",2);
insert into model(name, id_manufacturer) values("Idea",2);
insert into model(name, id_manufacturer) values("Fiorino",2);
insert into model(name, id_manufacturer) values("Fiesta",3);
insert into model(name, id_manufacturer) values("Focus",3);
insert into model(name, id_manufacturer) values("Ka",3);
insert into model(name, id_manufacturer) values("Elantra",4);
insert into model(name, id_manufacturer) values("HB20",4);
insert into model(name, id_manufacturer) values("i30",4);
insert into model(name, id_manufacturer) values("Civic",5);
insert into model(name, id_manufacturer) values("Fit",5);
insert into model(name, id_manufacturer) values("HR-V",5);
insert into model(name, id_manufacturer) values("350-Z",6);
insert into model(name, id_manufacturer) values("Corolla",7);
insert into model(name, id_manufacturer) values("Hilux",7);
insert into model(name, id_manufacturer) values("Supra",7);
insert into model(name, id_manufacturer) values("Fox",8);
insert into model(name, id_manufacturer) values("Gol",8);
insert into model(name, id_manufacturer) values("Corsa",1);
insert into model(name, id_manufacturer) values("Cruze",1);
insert into model(name, id_manufacturer) values("Opala",1);



select *
from model as m
join manufacturer as a on m.id_manufacturer = a.id_manufacturer
where a.name = "Chevrolet";
 

insert into model_color(id_model, id_color) values(1,1);
insert into manufacturer(name) values ("Chevrolet");


select * from car;
select * from manufacturer;
select * from model;
select * from color;


